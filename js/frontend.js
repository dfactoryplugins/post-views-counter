const a=function(){PostViewsCounter={promise:null,args:{},init:function(e){this.args=e;const t={};t.storage_type="cookies",t.storage_data=this.readCookieData("pvc_visits"+(e.multisite!==!1?"_"+parseInt(e.multisite):"")),e.mode==="rest_api"?this.promise=this.request(e.requestURL,t,"POST",{"Content-Type":"application/x-www-form-urlencoded; charset=utf-8","X-WP-Nonce":e.nonce}):(t.action="pvc-check-post",t.pvc_nonce=e.nonce,t.id=e.postID,this.promise=this.request(e.requestURL,t,"POST",{"Content-Type":"application/x-www-form-urlencoded; charset=utf-8"}))},request:function(e,t,n,c){const i={method:n,mode:"cors",cache:"no-cache",credentials:"same-origin",headers:c,body:this.prepareRequestData(t)},s=this;return fetch(e,i).then(function(o){if(!o.ok)throw Error(o.statusText);return o.json()}).then(function(o){try{typeof o=="object"&&o!==null?"success"in o&&o.success===!1?(console.log("PVC: Request error."),console.log(o.data)):(s.saveCookieData(o.storage),s.triggerEvent("pvcCheckPost",o)):(console.log("PVC: Invalid object."),console.log(o))}catch(r){console.log("PVC: Invalid JSON data."),console.log(r)}}).catch(function(o){console.log("PVC: Invalid response."),console.log(o)})},prepareRequestData:function(e){return Object.keys(e).map(function(t){return encodeURIComponent(t)+"="+encodeURIComponent(e[t])}).join("&").replace(/%20/g,"+")},triggerEvent:function(e,t){const n=new CustomEvent(e,{bubbles:!0,detail:t});document.dispatchEvent(n)},saveCookieData:function(e){if(!e.hasOwnProperty("name"))return;let t="";document.location.protocol==="https:"&&(t=";secure");for(let n=0;n<e.name.length;n++){const c=new Date;let i=parseInt(e.expiry[n]);i?i=i*1e3:i=c.getTime()+864e5,c.setTime(i),document.cookie=e.name[n]+"="+e.value[n]+";expires="+c.toUTCString()+";path=/"+(this.args.path==="/"?"":this.args.path)+";domain="+this.args.domain+t+";SameSite=Lax"}},readCookieData:function(e){const t=[];return document.cookie.split(";").forEach(function(n){const c=n.split("="),i=c[0],s=c[1],o=i.trim();new RegExp(e+"\\[\\d+\\]").test(o)&&t.push(s)}),t.join("a")}},PostViewsCounter.init(pvcArgsFrontend)};document.addEventListener("DOMContentLoaded",a);
