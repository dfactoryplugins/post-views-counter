var initPostViewsCounter=function(){PostViewsCounter={promise:null,args:{},init:function(e){this.args=e;var t={},n="pvc_visits"+(!1!==e.multisite?"_"+parseInt(e.multisite):"");t.storage_type="cookies",t.storage_data=this.readCookieData(n),"rest_api"===e.mode?this.promise=this.request(e.requestURL,t,"POST",{"Content-Type":"application/x-www-form-urlencoded; charset=utf-8","X-WP-Nonce":e.nonce},n):(t.action="pvc-check-post",t.pvc_nonce=e.nonce,t.id=e.postID,this.promise=this.request(e.requestURL,t,"POST",{"Content-Type":"application/x-www-form-urlencoded; charset=utf-8"},n))},request:function(e,t,n,o,i){void 0===i&&(i="");var r={method:n,mode:"cors",cache:"no-cache",credentials:"same-origin",headers:o,body:this.prepareRequestData(t)},s=this;return fetch(e,r).then((function(e){if(!e.ok)throw Error(e.statusText);return e.json()})).then((function(e){try{"object"==typeof e&&null!==e&&("success"in e&&!1===e.success||(s.saveCookieData(i,e.storage),s.triggerEvent("pvcCheckPost",e)))}catch(e){}})).catch((function(e){}))},prepareRequestData:function(e){return Object.keys(e).map((function(t){return encodeURIComponent(t)+"="+encodeURIComponent(e[t])})).join("&").replace(/%20/g,"+")},triggerEvent:function(e,t){var n=new CustomEvent(e,{bubbles:!0,detail:t});document.dispatchEvent(n)},saveCookieData:function(e,t){if(t.hasOwnProperty("name")){var n="";"https:"===document.location.protocol&&(n=";secure");for(var o=0;o<t.name.length;o++){var i=new Date,r=parseInt(t.expiry[o]);r?r*=1e3:r=i.getTime()+864e5,i.setTime(r),document.cookie=t.name[o]+"="+t.value[o]+";expires="+i.toUTCString()+";path=/"+("/"===this.args.path?"":this.args.path)+";domain="+this.args.domain+n+";SameSite=Lax"}}},readCookieData:function(e){var t=[];return document.cookie.split(";").forEach((function(n){var o=n.split("="),i=o[0],r=o[1],s=i.trim();new RegExp(e+"\\[\\d+\\]").test(s)&&t.push(r)})),t.join("a")}},PostViewsCounter.init(pvcArgsFrontend)};document.addEventListener("DOMContentLoaded",initPostViewsCounter);